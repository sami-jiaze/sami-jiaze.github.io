(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{499:function(t,a,v){t.exports=v.p+"assets/img/image-20230316110909450.950129b7.png"},603:function(t,a,v){"use strict";v.r(a);var _=v(2),r=Object(_.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("总览")]),t._v(" "),a("p",[t._v("简单介绍NAT")])]),t._v(" "),a("h2",{attrs:{id:"什么是nat"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是nat"}},[t._v("#")]),t._v(" 什么是NAT")]),t._v(" "),a("p",[t._v("NAT（Network Address Translation，网络地址转换）")]),t._v(" "),a("p",[t._v("它可以将IP数据报文头中的IP地址转换为另一个IP地址，并通过"),a("strong",[t._v("转换端口号")]),t._v("达到地址重用的目的。NAT作为一种缓解IPv4公网地址枯竭的过渡技术，由于实现简单，得到了广泛应用")]),t._v(" "),a("p",[t._v("简单的来说 NAT 就是同个公司、家庭、教室内的主机对外部通信时，把私有 IP 地址转换成公有 IP 地址。")]),t._v(" "),a("p",[a("img",{attrs:{src:v(499),alt:"image-20230316110909450"}})]),t._v(" "),a("p",[t._v("此时，两个私有 IP 地址都转换 IP 地址为公有地址 120.229.175.121，但是以不同的端口号作为区分。")]),t._v(" "),a("p",[t._v("于是，生成一个 NAPT 路由器的转换表，就可以正确地转换地址跟端口的组合，令客户端 A、B 能同时与服务器之间进行通信。")]),t._v(" "),a("p",[t._v("这种转换表在 NAT 路由器上自动生成。例如，在 TCP 的情况下，建立 TCP 连接首次握手时的 SYN 包一经发出，就会生成这个表。而后又随着收到关闭连接时发出 FIN 包的确认应答从表中被删除。")]),t._v(" "),a("h2",{attrs:{id:"nat缺陷"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nat缺陷"}},[t._v("#")]),t._v(" NAT缺陷")]),t._v(" "),a("p",[t._v("由于 NAT/NAPT 都依赖于自己的转换表，因此会有以下的问题：")]),t._v(" "),a("ul",[a("li",[t._v("外部无法主动与 NAT 内部服务器建立连接，因为 NAPT 转换表没有转换记录。")]),t._v(" "),a("li",[t._v("转换表的生成与转换操作都会产生性能开销。")]),t._v(" "),a("li",[t._v("通信过程中，如果 NAT 路由器重启了，所有的 TCP 连接都将被重置。")])]),t._v(" "),a("h2",{attrs:{id:"改进措施"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#改进措施"}},[t._v("#")]),t._v(" 改进措施")]),t._v(" "),a("p",[a("em",[t._v("第一种就是改用 IPv6")])]),t._v(" "),a("p",[t._v("IPv6 可用范围非常大，以至于每台设备都可以配置一个公有 IP 地址，就不搞那么多花里胡哨的地址转换了，但是 IPv6 普及速度还需要一些时间。")]),t._v(" "),a("p",[a("em",[t._v("第二种 NAT 穿透技术")])]),t._v(" "),a("p",[t._v("NAT 穿越技术拥有这样的功能，它能够让网络应用程序主动发现自己位于 NAT 设备之后，并且会主动获得 NAT 设备的公有 IP，并为自己建立端口映射条目，注意这些都是 NAT设备后的应用程序自动完成的。")]),t._v(" "),a("p",[t._v("也就是说，在 NAT 穿透技术中，NAT设备后的应用程序处于主动地位，它已经明确地知道 NAT 设备要修改它外发的数据包，于是它主动配合 NAT 设备的操作，主动地建立好映射，这样就不像以前由 NAT 设备来建立映射了。")]),t._v(" "),a("p",[t._v("客户端主动从 NAT 设备获取公有 IP 地址，然后自己建立端口映射条目，然后用这个条目对外通信，就不需要 NAT 设备来进行转换了")]),t._v(" "),a("h2",{attrs:{id:"参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("#")]),t._v(" 参考")]),t._v(" "),a("p",[t._v("小林coding")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/26992935",target:"_blank",rel:"noopener noreferrer"}},[t._v("网络地址转换协议NAT功能详解及NAT基础知识介绍 - 知乎 (zhihu.com)"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://info.support.huawei.com/info-finder/encyclopedia/zh/NAT.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("什么是NAT？NAT的类型有哪些？ - 华为 (huawei.com)"),a("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=r.exports}}]);