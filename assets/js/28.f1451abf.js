(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{531:function(t,a,v){t.exports=v.p+"assets/img/image-20230317075255555.5b741527.png"},532:function(t,a,v){t.exports=v.p+"assets/img/image-20230317080102365.7efaabe2.png"},533:function(t,a,v){t.exports=v.p+"assets/img/image-20230317080338579.429db599.png"},534:function(t,a,v){t.exports=v.p+"assets/img/image-20230317080412024.4456f04b.png"},700:function(t,a,v){"use strict";v.r(a);var s=v(2),_=Object(s.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("总览")]),t._v(" "),a("p",[t._v("什么是IGMP、IGMP工作机制")])]),t._v(" "),a("h2",{attrs:{id:"什么是igmp"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是igmp"}},[t._v("#")]),t._v(" 什么是IGMP")]),t._v(" "),a("p",[t._v("IGMP是Internet Group Management Ptotocol的简称，被称为"),a("strong",[t._v("互联网组管理协议")]),t._v("，负责IPV4组播成员管理的协议。")]),t._v(" "),a("h2",{attrs:{id:"icmp作用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#icmp作用"}},[t._v("#")]),t._v(" ICMP作用")]),t._v(" "),a("ul",[a("li",[t._v("IGMP协议用来在IP主机和与其直接相邻的组播路由器之间建立、维护组播组成员关系。")]),t._v(" "),a("li",[t._v("参与IP组播的主机可以在任意位置、任意时间加入或退出组播组。IP组播通常应用在视频点播、网络会议等场合")])]),t._v(" "),a("img",{staticStyle:{zoom:"80%"},attrs:{src:v(531),alt:"image-20230317075255555"}}),t._v(" "),a("ul",[a("li",[t._v("IGMP 报文向路由器申请加入和退出组播组，默认情况下路由器是不会转发组播包到连接中的主机，除非主机通过 IGMP 加入到组播组，主机申请加入到组播组时，路由器就会记录 IGMP 路由器表，路由器后续就会转发组播包到对应的主机了。")]),t._v(" "),a("li",[t._v("IGMP 报文采用 IP 封装，IP 头部的协议号为 2，而且 TTL 字段值通常为 1，因为 IGMP 是工作在主机与连接的路由器之间。")])]),t._v(" "),a("h2",{attrs:{id:"igmp协议版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#igmp协议版本"}},[t._v("#")]),t._v(" IGMP协议版本")]),t._v(" "),a("ul",[a("li",[t._v("IGMPv1：允许主机加入组播组，但没有离开信息。路由器基于超时机制去发现其成员离开")]),t._v(" "),a("li",[t._v("IGMPv2：包含了离开信息，允许迅速向路由协议报告组成员终止情况")]),t._v(" "),a("li",[t._v("IGMPv3：允许主机指定它要接收或组织的通信流量的主机对象（一个用户可能同时要接收好几个组播源给它发数据，这个用户可以指定它什么时间接收或者暂不接收等）")])]),t._v(" "),a("h2",{attrs:{id:"常规查询与响应工作机制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常规查询与响应工作机制"}},[t._v("#")]),t._v(" 常规查询与响应工作机制")]),t._v(" "),a("p",[t._v("以 "),a("code",[t._v("IGMPv2")]),t._v(" 作为例子")]),t._v(" "),a("img",{staticStyle:{zoom:"90%"},attrs:{src:v(532),alt:"image-20230317080102365"}}),t._v(" "),a("ol",[a("li",[t._v("路由器会周期性发送目的地址为 "),a("code",[t._v("224.0.0.1")]),t._v("（表示同一网段内所有主机和路由器） "),a("strong",[t._v("IGMP 常规查询报文")]),t._v("。")]),t._v(" "),a("li",[t._v("主机1 和 主机 3 收到这个查询，随后会启动「报告延迟计时器」，计时器的时间是随机的，通常是 0~10 秒，计时器超时后主机就会发送 "),a("strong",[t._v("IGMP 成员关系报告报文")]),t._v("（源 IP 地址为自己主机的 IP 地址，目的 IP 地址为组播地址）。如果在定时器超时之前，收到同一个组内的其他主机发送的成员关系报告报文，则自己不再发送，这样可以减少网络中多余的 IGMP 报文数量。")]),t._v(" "),a("li",[t._v("路由器收到主机的成员关系报文后，就会在 IGMP 路由表中加入该组播组，后续网络中一旦该组播地址的数据到达路由器，它会把数据包转发出去。")])]),t._v(" "),a("h2",{attrs:{id:"离开组播组工作机制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#离开组播组工作机制"}},[t._v("#")]),t._v(" 离开组播组工作机制")]),t._v(" "),a("p",[t._v("情况一，网段中仍有该组播组")]),t._v(" "),a("img",{staticStyle:{zoom:"80%"},attrs:{src:v(533),alt:"image-20230317080338579"}}),t._v(" "),a("ol",[a("li",[t._v("主机 1 要离开组 224.1.1.1，发送 IGMPv2 离组报文，报文的目的地址是 224.0.0.2（表示发向网段内的所有路由器）")]),t._v(" "),a("li",[t._v("路由器 收到该报文后，以 1 秒为间隔连续发送 IGMP 特定组查询报文（共计发送 2 个），以便确认该网络是否还有 224.1.1.1 组的其他成员。")]),t._v(" "),a("li",[t._v("主机 3 仍然是组 224.1.1.1 的成员，因此它立即响应这个特定组查询。路由器知道该网络中仍然存在该组播组的成员，于是继续向该网络转发 224.1.1.1 的组播数据包。")])]),t._v(" "),a("p",[t._v("情况二，网段中没有该组播组")]),t._v(" "),a("img",{staticStyle:{zoom:"80%"},attrs:{src:v(534),alt:"image-20230317080412024"}}),t._v(" "),a("ol",[a("li",[t._v("主机 1 要离开组播组 224.1.1.1，发送 IGMP 离组报文。")]),t._v(" "),a("li",[t._v("路由器收到该报文后，以 1 秒为间隔连续发送 IGMP 特定组查询报文（共计发送 2 个）。此时在该网段内，组 224.1.1.1 已经没有其他成员了，因此没有主机响应这个查询。")]),t._v(" "),a("li",[t._v("一定时间后，路由器认为该网段中已经没有 224.1.1.1 组播组成员了，将不会再向这个网段转发该组播地址的数据包。")])]),t._v(" "),a("h2",{attrs:{id:"组播地址"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#组播地址"}},[t._v("#")]),t._v(" 组播地址")]),t._v(" "),a("p",[t._v("组播地址不是用于机器ip地址的，因为组播地址没有网络号和主机号，所以跟dhcp没关系。组播地址一般是用于udp协议，机器发送UDP组播数据时，目标地址填的是组播地址，那么在组播组内的机器都能收到数据包。")]),t._v(" "),a("p",[t._v("是否加入组播组和离开组播组，是由socket一个接口实现的，主机ip是不用改变的")]),t._v(" "),a("h2",{attrs:{id:"参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("#")]),t._v(" 参考")]),t._v(" "),a("p",[t._v("小林coding")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/387885523",target:"_blank",rel:"noopener noreferrer"}},[t._v("IGMP是什么？5分钟带你搞懂！ - 知乎 (zhihu.com)"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.jianshu.com/p/1bc9bd7cdc8f",target:"_blank",rel:"noopener noreferrer"}},[t._v("IGMP协议 - 简书 (jianshu.com)"),a("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=_.exports}}]);